<app-sidebar></app-sidebar>
<div class="flex flex-row">
    <div *ngIf="currentBoard && toDoTaskModelList" class="p-8 pt-12 sm:ml-64 basis-3/4">
        <div class="flex justify-between items-center">
            <h1>
                {{ currentBoard.name }}
                <span *ngIf="communityBoard">
                    <mat-icon>groups</mat-icon>
                </span>
            </h1>
        </div>

        <div class="flex space-x-8">
            <div class="example-container">
                <h2>To do</h2>
                <div cdkDropList #todoList="cdkDropList" id="todoList" [cdkDropListData]="toDoTaskModelList"
                    [cdkDropListConnectedTo]="longBoard ? ['inProgressList'] : [doneList]"
                    class="example-list" (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of toDoTaskModelList" cdkDrag [ngClass]="'example-box-todo'"
                        (cdkDragDropped)="checkDrop($event, item)">
                        {{ item.name }}
                        <mat-icon class="cursor-pointer" (click)="viewDetails(item, communityBoard)">visibility</mat-icon>
                    </div>
                </div>
                <div class="mt-8">
                    <button mat-raised-button *ngIf="!communityBoard" color="primary" (click)="addTask()">
                        Add task
                    </button>
                </div>
            </div>
        
            <div *ngIf="longBoard" class="example-container">
            <!-- <div class="example-container"> -->
                <h2>In progress</h2>
                <div cdkDropList #inProgressList="cdkDropList" id="inProgressList" [cdkDropListData]="inProgressTaskModelList"
                    [cdkDropListConnectedTo]="[todoList, doneList]" class="example-list" (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of inProgressTaskModelList"
                        cdkDrag [ngClass]="'example-box-in-progress'" (cdkDragDropped)="checkDrop($event, item)">
                        {{ item.name }}
                        <mat-icon class="cursor-pointer" (click)="viewDetails(item, communityBoard)">visibility</mat-icon>
                    </div>
                </div>
            </div>
        
            <div class="example-container">
                <h2>Done</h2>
                <div cdkDropList #doneList="cdkDropList" id="doneList" [cdkDropListData]="doneTaskModelList"
                    [cdkDropListConnectedTo]="longBoard ? ['inProgressList'] : [todoList]"
                    class="example-list" (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of doneTaskModelList" cdkDrag [ngClass]="'example-box-done'"
                        (cdkDragDropped)="checkDrop($event, item)">
                        {{ item.name }}
                        <mat-icon class="cursor-pointer" (click)="viewDetails(item, communityBoard)">visibility</mat-icon>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <div *ngIf="boardList" class="pt-11 basis-1/4">
        <mat-selection-list [multiple]="false">
            <h2>My boards</h2>
            <mat-list-option *ngFor="let board of boardList" [value]="board" (click)="changeBoard(board)">
                <div class="flex items-center">
                    <span class="mr-2" *ngIf="board.creatorUserId !== board.userId">
                        <mat-icon>groups</mat-icon>
                    </span>
                    {{ board.name }}
                </div>
            </mat-list-option>
        </mat-selection-list>
    </div>
</div>
